{% if include.doctree %}
    {% assign docs = site.data[include.doctree] %}
{% else %}
    {% assign docs = site.data[page.doctree] %}
{% endif %}

{% if include.tag %}
    {% assign tag = include.tag %}
{% else %}
    {% assign tag = "h4" %}
{% endif %}

{% for section in docs %}
<div class="doc-section">
    <{{tag}} id="{{ section.title | replace:' ','-' | downcase }}">{{ section.title }}</{{tag}}>

    <ul>
    {% for item in section.docs %}
        {% assign item_url = item | prepend:"/docs/" | append:"/" %}
        {% if item_url == page.url %}
            {% assign cls = "current" %}
        {% else %}
            {% assign cls = "" %}
        {% endif %}
        {% for p in site.docs %}
            {% if p.url == item_url %}
                <li class="{{ cls }}"><a href="{{ site.url }}{{ p.url }}">{{ p.title }}</a></li>
                {% break %}
            {% endif %}
        {% endfor %}
    {% endfor %}
    </ul>
</div>
{% endfor %}