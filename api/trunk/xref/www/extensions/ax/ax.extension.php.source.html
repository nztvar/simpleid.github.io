<!DOCTYPE html>
<html>
<head>
    <title>PHPXRef 0.7.1 : SimpleID : /www/extensions/ax/ax.extension.php source</title>
    <link rel="stylesheet" href="../../../xref.css" type="text/css">
    <link rel="stylesheet" href="../../../xref-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
</head>
<body>
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of SimpleID</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon Apr  6 15:24:46 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='www/extensions/ax';
filename='ax.extension.php.source.html';
cookiekey='simpleid';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/www/extensions/ax/</a> -> <a href="ax.extension.php.html">ax.extension.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="ax.extension.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="ax.extension.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/*</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * SimpleID</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * Copyright (C) Kelvin Mo 2009</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> *</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * modify it under the terms of the GNU General Public</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * version 2 of the License, or (at your option) any later version.</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> *</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> * General Public License for more details.</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> *</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> * You should have received a copy of the GNU General Public</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * License along with this program; if not, write to the Free</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * </span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * $Id$</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">/**</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * Implements the Attribute Exchange extension.</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * </span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @package simpleid</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @subpackage extensions</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @filesource</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> */</span>
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">/** Namespace for the AX extension */</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>', 'http://openid.net/srv/ax/1.0');
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/** @ignore */</span>
<a name="l37"><span class="linenum">  37</span></a>  global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a>;
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * A mapping between Type URIs defined for Attribute Exchange and the corresponding</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * property for the Simple Registration Extension</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> *</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * @link http://www.axschema.org/types/#sreg</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * @global array</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> */</span>
<a name="l46"><span class="linenum">  46</span></a>  <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a> = <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>(
<a name="l47"><span class="linenum">  47</span></a>      'http://axschema.org/namePerson/friendly' =&gt; 'nickname',
<a name="l48"><span class="linenum">  48</span></a>      'http://axschema.org/contact/email' =&gt; 'email',
<a name="l49"><span class="linenum">  49</span></a>      'http://axschema.org/namePerson' =&gt; 'fullname',
<a name="l50"><span class="linenum">  50</span></a>      'http://axschema.org/birthDate' =&gt; 'dob',
<a name="l51"><span class="linenum">  51</span></a>      'http://axschema.org/person/gender' =&gt; 'gender',
<a name="l52"><span class="linenum">  52</span></a>      'http://axschema.org/contact/postalCode/home' =&gt; 'postcode',
<a name="l53"><span class="linenum">  53</span></a>      'http://axschema.org/contact/country/home' =&gt; 'country',
<a name="l54"><span class="linenum">  54</span></a>      'http://axschema.org/pref/language' =&gt; 'language',
<a name="l55"><span class="linenum">  55</span></a>      'http://axschema.org/pref/timezone' =&gt; 'timezone',
<a name="l56"><span class="linenum">  56</span></a>      'http://openid.net/schema/namePerson/friendly' =&gt; 'nickname',
<a name="l57"><span class="linenum">  57</span></a>      'http://openid.net/schema/contact/internet/email' =&gt; 'email',
<a name="l58"><span class="linenum">  58</span></a>      'http://openid.net/schema/gender' =&gt; 'gender',
<a name="l59"><span class="linenum">  59</span></a>      'http://openid.net/schema/contact/postalCode/home' =&gt; 'postcode',
<a name="l60"><span class="linenum">  60</span></a>      'http://openid.net/schema/contact/country/home' =&gt; 'country',
<a name="l61"><span class="linenum">  61</span></a>      'http://openid.net/schema/language/pref' =&gt; 'language',
<a name="l62"><span class="linenum">  62</span></a>      'http://openid.net/schema/timezone' =&gt; 'timezone'
<a name="l63"><span class="linenum">  63</span></a>  );
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">/**</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> * Returns the support for AX in SimpleID XRDS document</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> *</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * @return array</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * @see hook_xrds_types()</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> */</span>
<a name="l71"><span class="linenum">  71</span></a>  function <a class="function" onClick="logFunction('ax_xrds_types')" href="../../../_functions/ax_xrds_types.html" onMouseOver="funcPopup(event,'ax_xrds_types')">ax_xrds_types</a>() {
<a name="l72"><span class="linenum">  72</span></a>      return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>);
<a name="l73"><span class="linenum">  73</span></a>  }
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">/**</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment"> * @see hook_response()</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment"> */</span>
<a name="l78"><span class="linenum">  78</span></a>  function <a class="function" onClick="logFunction('ax_response')" href="../../../_functions/ax_response.html" onMouseOver="funcPopup(event,'ax_response')">ax_response</a>(<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('assertion')" href="../../../_variables/assertion.html">$assertion</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>) {
<a name="l79"><span class="linenum">  79</span></a>      global <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>;
<a name="l80"><span class="linenum">  80</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../../_variables/version.html">$version</a>;
<a name="l81"><span class="linenum">  81</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a>;
<a name="l82"><span class="linenum">  82</span></a>      
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">    // We only deal with positive assertions</span>
<a name="l84"><span class="linenum">  84</span></a>      if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('assertion')" href="../../../_variables/assertion.html">$assertion</a>) return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l85"><span class="linenum">  85</span></a>      
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">    // We only respond if the extension is requested</span>
<a name="l87"><span class="linenum">  87</span></a>      if (!<a class="function" onClick="logFunction('openid_extension_requested')" href="../../../_functions/openid_extension_requested.html" onMouseOver="funcPopup(event,'openid_extension_requested')">openid_extension_requested</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>)) return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l88"><span class="linenum">  88</span></a>      
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a> = <a class="function" onClick="logFunction('openid_extension_filter_request')" href="../../../_functions/openid_extension_filter_request.html" onMouseOver="funcPopup(event,'openid_extension_filter_request')">openid_extension_filter_request</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>);
<a name="l90"><span class="linenum">  90</span></a>      if (!<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['mode'])) return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l91"><span class="linenum">  91</span></a>      <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['mode'];
<a name="l92"><span class="linenum">  92</span></a>      
<a name="l93"><span class="linenum">  93</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a> = <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l94"><span class="linenum">  94</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> = <a class="function" onClick="logFunction('openid_extension_alias')" href="../../../_functions/openid_extension_alias.html" onMouseOver="funcPopup(event,'openid_extension_alias')">openid_extension_alias</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>);
<a name="l95"><span class="linenum">  95</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.ns.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a>] = <a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>;
<a name="l96"><span class="linenum">  96</span></a>      
<a name="l97"><span class="linenum">  97</span></a>      if (<a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'fetch_request') {
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.mode'] = 'fetch_response';
<a name="l99"><span class="linenum">  99</span></a>          
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a> = (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['required'])) ? <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['required']) : <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('optional')" href="../../../_variables/optional.html">$optional</a> = (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['if_available'])) ? <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['if_available']) : <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('optional')" href="../../../_variables/optional.html">$optional</a>);
<a name="l103"><span class="linenum"> 103</span></a>          
<a name="l104"><span class="linenum"> 104</span></a>          foreach (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>) {
<a name="l105"><span class="linenum"> 105</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['type.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>];
<a name="l106"><span class="linenum"> 106</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.type.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>] = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>;
<a name="l107"><span class="linenum"> 107</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('_ax_get_value')" href="../../../_functions/_ax_get_value.html" onMouseOver="funcPopup(event,'_ax_get_value')">_ax_get_value</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>);
<a name="l108"><span class="linenum"> 108</span></a>              
<a name="l109"><span class="linenum"> 109</span></a>              if (<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> == NULL) {
<a name="l110"><span class="linenum"> 110</span></a>                  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.count.' .  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>] = 0;
<a name="l111"><span class="linenum"> 111</span></a>              } elseif (<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>)) {
<a name="l112"><span class="linenum"> 112</span></a>                  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.count.' .  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>] = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>);
<a name="l113"><span class="linenum"> 113</span></a>                  for (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>); <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++) {
<a name="l114"><span class="linenum"> 114</span></a>                      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.value.' .  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a> . '.' . (<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> + 1)] = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>[<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>];
<a name="l115"><span class="linenum"> 115</span></a>                  }
<a name="l116"><span class="linenum"> 116</span></a>              } else {
<a name="l117"><span class="linenum"> 117</span></a>                  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.value.' .  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>] = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l118"><span class="linenum"> 118</span></a>              }
<a name="l119"><span class="linenum"> 119</span></a>          }
<a name="l120"><span class="linenum"> 120</span></a>      } elseif (<a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'store_request') {
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">        // Sadly, we don't support storage at this stage</span>
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.mode'] = 'store_response_failure';
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.error'] = 'OpenID provider does not support storage of attributes';
<a name="l124"><span class="linenum"> 124</span></a>      }
<a name="l125"><span class="linenum"> 125</span></a>      
<a name="l126"><span class="linenum"> 126</span></a>      return <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>;
<a name="l127"><span class="linenum"> 127</span></a>  }
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">/**</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * Returns an array of fields that need signing.</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> *</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment"> * @see hook_signed_fields()</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment"> */</span>
<a name="l134"><span class="linenum"> 134</span></a>  function <a class="function" onClick="logFunction('ax_signed_fields')" href="../../../_functions/ax_signed_fields.html" onMouseOver="funcPopup(event,'ax_signed_fields')">ax_signed_fields</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>) {
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">    // We only respond if the extension is requested</span>
<a name="l136"><span class="linenum"> 136</span></a>      if (!<a class="function" onClick="logFunction('openid_extension_requested')" href="../../../_functions/openid_extension_requested.html" onMouseOver="funcPopup(event,'openid_extension_requested')">openid_extension_requested</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>)) return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l137"><span class="linenum"> 137</span></a>      
<a name="l138"><span class="linenum"> 138</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('openid_extension_filter_request')" href="../../../_functions/openid_extension_filter_request.html" onMouseOver="funcPopup(event,'openid_extension_filter_request')">openid_extension_filter_request</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>));
<a name="l139"><span class="linenum"> 139</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> = <a class="function" onClick="logFunction('openid_extension_alias')" href="../../../_functions/openid_extension_alias.html" onMouseOver="funcPopup(event,'openid_extension_alias')">openid_extension_alias</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>);
<a name="l140"><span class="linenum"> 140</span></a>      <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('signed_fields')" href="../../../_variables/signed_fields.html">$signed_fields</a> = <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>      if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.ns.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a>])) <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('signed_fields')" href="../../../_variables/signed_fields.html">$signed_fields</a>[] = 'ns.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a>;
<a name="l143"><span class="linenum"> 143</span></a>      foreach (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>) {
<a name="l144"><span class="linenum"> 144</span></a>          if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>])) <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('signed_fields')" href="../../../_variables/signed_fields.html">$signed_fields</a>[] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>;
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>      
<a name="l147"><span class="linenum"> 147</span></a>      return <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('signed_fields')" href="../../../_variables/signed_fields.html">$signed_fields</a>;
<a name="l148"><span class="linenum"> 148</span></a>  }
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">/**</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment"> * @see hook_consent_form()</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment"> */</span>
<a name="l153"><span class="linenum"> 153</span></a>  function <a class="function" onClick="logFunction('ax_consent_form')" href="../../../_functions/ax_consent_form.html" onMouseOver="funcPopup(event,'ax_consent_form')">ax_consent_form</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>, <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('rp')" href="../../../_variables/rp.html">$rp</a>) {
<a name="l154"><span class="linenum"> 154</span></a>      global <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>;
<a name="l155"><span class="linenum"> 155</span></a>      
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">    // We only respond if the extension is requested</span>
<a name="l157"><span class="linenum"> 157</span></a>      if (!<a class="function" onClick="logFunction('openid_extension_requested')" href="../../../_functions/openid_extension_requested.html" onMouseOver="funcPopup(event,'openid_extension_requested')">openid_extension_requested</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>)) return '';
<a name="l158"><span class="linenum"> 158</span></a>      
<a name="l159"><span class="linenum"> 159</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a> = <a class="function" onClick="logFunction('openid_extension_filter_request')" href="../../../_functions/openid_extension_filter_request.html" onMouseOver="funcPopup(event,'openid_extension_filter_request')">openid_extension_filter_request</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>);
<a name="l160"><span class="linenum"> 160</span></a>      if (!<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['mode'])) return '';
<a name="l161"><span class="linenum"> 161</span></a>      <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['mode'];
<a name="l162"><span class="linenum"> 162</span></a>      
<a name="l163"><span class="linenum"> 163</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a> = <span class="keyword">new </span><a class="class" onClick="logClass('XTemplate')" href="../../../_classes/xtemplate.html" onMouseOver="classPopup(event,'xtemplate')">XTemplate</a>('extensions/ax/ax.xtpl');
<a name="l164"><span class="linenum"> 164</span></a>      
<a name="l165"><span class="linenum"> 165</span></a>      if (<a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'fetch_request') {
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('alias', <a class="function" onClick="logFunction('openid_extension_alias')" href="../../../_functions/openid_extension_alias.html" onMouseOver="funcPopup(event,'openid_extension_alias')">openid_extension_alias</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>));
<a name="l167"><span class="linenum"> 167</span></a>          
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a> = (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['required'])) ? <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['required']) : <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('optional')" href="../../../_variables/optional.html">$optional</a> = (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['if_available'])) ? <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['if_available']) : <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('optional')" href="../../../_variables/optional.html">$optional</a>);
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 1;
<a name="l172"><span class="linenum"> 172</span></a>          
<a name="l173"><span class="linenum"> 173</span></a>          foreach (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>) {
<a name="l174"><span class="linenum"> 174</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('request')" href="../../../_variables/request.html">$request</a>['type.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>];
<a name="l175"><span class="linenum"> 175</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('_ax_get_value')" href="../../../_functions/_ax_get_value.html" onMouseOver="funcPopup(event,'_ax_get_value')">_ax_get_value</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>);
<a name="l176"><span class="linenum"> 176</span></a>              
<a name="l177"><span class="linenum"> 177</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('name', <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, ENT_QUOTES, 'UTF-8'));
<a name="l178"><span class="linenum"> 178</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('id', <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>);
<a name="l179"><span class="linenum"> 179</span></a>              
<a name="l180"><span class="linenum"> 180</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>)) {
<a name="l181"><span class="linenum"> 181</span></a>                  <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('value', <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>), ENT_QUOTES, 'UTF-8'));
<a name="l182"><span class="linenum"> 182</span></a>              } elseif (<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> != NULL) {
<a name="l183"><span class="linenum"> 183</span></a>                  <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('value', <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, ENT_QUOTES, 'UTF-8'));
<a name="l184"><span class="linenum"> 184</span></a>              }
<a name="l185"><span class="linenum"> 185</span></a>              
<a name="l186"><span class="linenum"> 186</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('checked', (<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a>) || !<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('rp')" href="../../../_variables/rp.html">$rp</a>['ax_consents']) || <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('rp')" href="../../../_variables/rp.html">$rp</a>['ax_consents'])) ? 'checked=&quot;checked&quot;' : '');
<a name="l187"><span class="linenum"> 187</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('disabled', (<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a>)) ? 'disabled=&quot;disabled&quot;' : '');
<a name="l188"><span class="linenum"> 188</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a>)) <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>('fetch_request.ax.required');
<a name="l189"><span class="linenum"> 189</span></a>              
<a name="l190"><span class="linenum"> 190</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>('fetch_request.ax');
<a name="l191"><span class="linenum"> 191</span></a>              
<a name="l192"><span class="linenum"> 192</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++;
<a name="l193"><span class="linenum"> 193</span></a>          }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('ax_data', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('SimpleID will also be sending the following information to the site.'));
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('name_label', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('Type URL'));
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('value_label', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('Value'));
<a name="l198"><span class="linenum"> 198</span></a>          
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>('fetch_request');
<a name="l200"><span class="linenum"> 200</span></a>          return <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>('fetch_request');
<a name="l201"><span class="linenum"> 201</span></a>      } elseif (<a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'store_request') {
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        // Sadly, we don't support storage at this stage</span>
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('store_request_message', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('This web site requested to store information about you on SimpleID. Sadly, SimpleID does not support this feature.'));
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>('store_request');
<a name="l205"><span class="linenum"> 205</span></a>          return <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>('store_request');
<a name="l206"><span class="linenum"> 206</span></a>      }
<a name="l207"><span class="linenum"> 207</span></a>  }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">/**</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment"> * @see hook_consent()</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment"> */</span>
<a name="l212"><span class="linenum"> 212</span></a>  function <a class="function" onClick="logFunction('ax_consent')" href="../../../_functions/ax_consent.html" onMouseOver="funcPopup(event,'ax_consent')">ax_consent</a>(<a class="var it19" onMouseOver="hilite(19)" onMouseOut="lolite()" onClick="logVariable('form_request')" href="../../../_variables/form_request.html">$form_request</a>, &amp;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>, &amp;<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('rp')" href="../../../_variables/rp.html">$rp</a>) {
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">    // We only respond if the extension is requested</span>
<a name="l214"><span class="linenum"> 214</span></a>      if (!<a class="function" onClick="logFunction('openid_extension_requested')" href="../../../_functions/openid_extension_requested.html" onMouseOver="funcPopup(event,'openid_extension_requested')">openid_extension_requested</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>)) return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>();
<a name="l215"><span class="linenum"> 215</span></a>      
<a name="l216"><span class="linenum"> 216</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('openid_extension_filter_request')" href="../../../_functions/openid_extension_filter_request.html" onMouseOver="funcPopup(event,'openid_extension_filter_request')">openid_extension_filter_request</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>));
<a name="l217"><span class="linenum"> 217</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> = <a class="function" onClick="logFunction('openid_extension_alias')" href="../../../_functions/openid_extension_alias.html" onMouseOver="funcPopup(event,'openid_extension_alias')">openid_extension_alias</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>);
<a name="l218"><span class="linenum"> 218</span></a>      
<a name="l219"><span class="linenum"> 219</span></a>      foreach (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>) {
<a name="l220"><span class="linenum"> 220</span></a>          if ((<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, 'value.') !== 0) &amp;&amp; (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, 'count.') !== 0)) continue;
<a name="l221"><span class="linenum"> 221</span></a>          
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('type_alias')" href="../../../_variables/type_alias.html">$type_alias</a> = (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, '.', 6) === FALSE) ? <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, 6) : <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, '.', 6) - 6);
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.type.' . <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('type_alias')" href="../../../_variables/type_alias.html">$type_alias</a>];
<a name="l224"><span class="linenum"> 224</span></a>          
<a name="l225"><span class="linenum"> 225</span></a>          if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>])) {
<a name="l226"><span class="linenum"> 226</span></a>              if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it19" onMouseOver="hilite(19)" onMouseOut="lolite()" onClick="logVariable('form_request')" href="../../../_variables/form_request.html">$form_request</a>['ax_consents'])) {
<a name="l227"><span class="linenum"> 227</span></a>                  <a class="phpfunction" onClick="logFunction('unset')" href="../../../_functions/unset.html" onMouseOver="phpfuncPopup(event,'unset')">unset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>]);
<a name="l228"><span class="linenum"> 228</span></a>              }
<a name="l229"><span class="linenum"> 229</span></a>          }
<a name="l230"><span class="linenum"> 230</span></a>      }
<a name="l231"><span class="linenum"> 231</span></a>      foreach (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../_variables/fields.html">$fields</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>) {
<a name="l232"><span class="linenum"> 232</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>, 'type.') !== 0) continue;
<a name="l233"><span class="linenum"> 233</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>];
<a name="l234"><span class="linenum"> 234</span></a>          
<a name="l235"><span class="linenum"> 235</span></a>          if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>])) {
<a name="l236"><span class="linenum"> 236</span></a>              if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it19" onMouseOver="hilite(19)" onMouseOut="lolite()" onClick="logVariable('form_request')" href="../../../_variables/form_request.html">$form_request</a>['ax_consents'])) {
<a name="l237"><span class="linenum"> 237</span></a>                  <a class="phpfunction" onClick="logFunction('unset')" href="../../../_functions/unset.html" onMouseOver="phpfuncPopup(event,'unset')">unset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a> . '.' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>]);
<a name="l238"><span class="linenum"> 238</span></a>              }
<a name="l239"><span class="linenum"> 239</span></a>          }
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>      
<a name="l242"><span class="linenum"> 242</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('openid_extension_filter_request')" href="../../../_functions/openid_extension_filter_request.html" onMouseOver="funcPopup(event,'openid_extension_filter_request')">openid_extension_filter_request</a>(<a class="constant" onClick="logConstant('OPENID_NS_AX')" href="../../../_constants/OPENID_NS_AX.html" onMouseOver="constPopup(event,'OPENID_NS_AX')">OPENID_NS_AX</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>))) == 0) {
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">        // We have removed all the responses, so we remove the namespace as well</span>
<a name="l244"><span class="linenum"> 244</span></a>          <a class="phpfunction" onClick="logFunction('unset')" href="../../../_functions/unset.html" onMouseOver="phpfuncPopup(event,'unset')">unset</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>['openid.ns.' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../_variables/alias.html">$alias</a>]);
<a name="l245"><span class="linenum"> 245</span></a>      }
<a name="l246"><span class="linenum"> 246</span></a>      
<a name="l247"><span class="linenum"> 247</span></a>      <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('rp')" href="../../../_variables/rp.html">$rp</a>['ax_consents'] = <a class="var it19" onMouseOver="hilite(19)" onMouseOut="lolite()" onClick="logVariable('form_request')" href="../../../_variables/form_request.html">$form_request</a>['ax_consents'];
<a name="l248"><span class="linenum"> 248</span></a>  }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment"> * @see hook_page_profile()</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment"> */</span>
<a name="l253"><span class="linenum"> 253</span></a>  function <a class="function" onClick="logFunction('ax_page_profile')" href="../../../_functions/ax_page_profile.html" onMouseOver="funcPopup(event,'ax_page_profile')">ax_page_profile</a>() {
<a name="l254"><span class="linenum"> 254</span></a>      global <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>;
<a name="l255"><span class="linenum"> 255</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a> = <span class="keyword">new </span><a class="class" onClick="logClass('XTemplate')" href="../../../_classes/xtemplate.html" onMouseOver="classPopup(event,'xtemplate')">XTemplate</a>('extensions/ax/ax.xtpl');
<a name="l256"><span class="linenum"> 256</span></a>      
<a name="l257"><span class="linenum"> 257</span></a>      if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['ax'])) {
<a name="l258"><span class="linenum"> 258</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['ax'] as <a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a> =&gt; <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) {
<a name="l259"><span class="linenum"> 259</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('name', <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>, ENT_QUOTES, 'UTF-8'));
<a name="l260"><span class="linenum"> 260</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('value', <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, ENT_QUOTES, 'UTF-8'));
<a name="l261"><span class="linenum"> 261</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>('user_page.ax');
<a name="l262"><span class="linenum"> 262</span></a>          }
<a name="l263"><span class="linenum"> 263</span></a>      }
<a name="l264"><span class="linenum"> 264</span></a>      
<a name="l265"><span class="linenum"> 265</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('ax_data', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('SimpleID will send the following information to sites which supports the Attribute Exchange Extension.  If you have also supplied OpenID Connect user information in your identity, or have the Simple Registration Extension installed, these may also be sent as part of this Extension.'));
<a name="l266"><span class="linenum"> 266</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('edit_identity_file', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('To change these, &lt;a href=&quot;!url&quot;&gt;edit your identity file&lt;/a&gt;.', <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>('!url' =&gt; 'http://simpleid.koinic.net/documentation/getting-started/setting-identity/identity-files')));
<a name="l267"><span class="linenum"> 267</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('name_label', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('Type URL'));
<a name="l268"><span class="linenum"> 268</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('assign')" href="../../../_functions/assign.html" onMouseOver="funcPopup(event,'assign')">assign</a>('value_label', <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('Value'));
<a name="l269"><span class="linenum"> 269</span></a>      
<a name="l270"><span class="linenum"> 270</span></a>      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>('user_page');
<a name="l271"><span class="linenum"> 271</span></a>      
<a name="l272"><span class="linenum"> 272</span></a>      return <a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>(<a class="phpfunction" onClick="logFunction('array')" href="../../../_functions/array.html" onMouseOver="phpfuncPopup(event,'array')">array</a>(
<a name="l273"><span class="linenum"> 273</span></a>          'id' =&gt; 'ax',
<a name="l274"><span class="linenum"> 274</span></a>          'title' =&gt; <a class="function" onClick="logFunction('t')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">t</a>('Attribute Exchange Extension'),
<a name="l275"><span class="linenum"> 275</span></a>          'content' =&gt; <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('xtpl2')" href="../../../_variables/xtpl2.html">$xtpl2</a>-&gt;<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>('user_page')
<a name="l276"><span class="linenum"> 276</span></a>      ));
<a name="l277"><span class="linenum"> 277</span></a>  }
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">/**</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> * Looks up the value of a specified Attribute Exchange Extension type URI.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> *</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * This function looks up the ax section of the user's identity file.  If the</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * specified type cannot be found, it looks up the corresponding field in the</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> * OpenID Connect user information (user_info section) and the Simple Registration</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment"> * Extension (sreg section).</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> *</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * @param string $type the type URI to look up</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> * @return string the value or NULL if not found</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment"> */</span>
<a name="l290"><span class="linenum"> 290</span></a>  function <a class="function" onClick="logFunction('_ax_get_value')" href="../../../_functions/_ax_get_value.html" onMouseOver="funcPopup(event,'_ax_get_value')">_ax_get_value</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>) {
<a name="l291"><span class="linenum"> 291</span></a>      global <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>;
<a name="l292"><span class="linenum"> 292</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a>;
<a name="l293"><span class="linenum"> 293</span></a>      
<a name="l294"><span class="linenum"> 294</span></a>      if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['ax'][<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>])) {
<a name="l295"><span class="linenum"> 295</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['ax'][<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>];
<a name="l296"><span class="linenum"> 296</span></a>      } else {
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">        // Look up OpenID Connect</span>
<a name="l298"><span class="linenum"> 298</span></a>          switch (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>) {
<a name="l299"><span class="linenum"> 299</span></a>              case 'http://axschema.org/namePerson/friendly':
<a name="l300"><span class="linenum"> 300</span></a>                  if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['nickname'])) return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['nickname'];
<a name="l301"><span class="linenum"> 301</span></a>                  break;
<a name="l302"><span class="linenum"> 302</span></a>              case 'http://axschema.org/contact/email':
<a name="l303"><span class="linenum"> 303</span></a>                  if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['email'])) return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['email'];
<a name="l304"><span class="linenum"> 304</span></a>                  break;
<a name="l305"><span class="linenum"> 305</span></a>              case 'http://axschema.org/namePerson':
<a name="l306"><span class="linenum"> 306</span></a>                  if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['name'])) return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['name'];
<a name="l307"><span class="linenum"> 307</span></a>                  break;
<a name="l308"><span class="linenum"> 308</span></a>              case 'http://axschema.org/pref/timezone':
<a name="l309"><span class="linenum"> 309</span></a>                  if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['zoneinfo'])) return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['zoneinfo'];
<a name="l310"><span class="linenum"> 310</span></a>                  break;
<a name="l311"><span class="linenum"> 311</span></a>              case 'http://axschema.org/person/gender':
<a name="l312"><span class="linenum"> 312</span></a>                  if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['gender'])) return <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['gender'], 0, 1));
<a name="l313"><span class="linenum"> 313</span></a>                  break;
<a name="l314"><span class="linenum"> 314</span></a>              case 'http://axschema.org/contact/postalCode/home':
<a name="l315"><span class="linenum"> 315</span></a>                  if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['address']['postal_code'])) return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['user_info']['address']['postcal_code'];
<a name="l316"><span class="linenum"> 316</span></a>                  break;
<a name="l317"><span class="linenum"> 317</span></a>          } 
<a name="l318"><span class="linenum"> 318</span></a>          
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">        // Look up sreg</span>
<a name="l320"><span class="linenum"> 320</span></a>          if (<a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>]) &amp;&amp; <a class="phpfunction" onClick="logFunction('isset')" href="../../../_functions/isset.html" onMouseOver="phpfuncPopup(event,'isset')">isset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['sreg'][<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>]])) {
<a name="l321"><span class="linenum"> 321</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>['sreg'][<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('ax_sreg_map')" href="../../../_variables/ax_sreg_map.html">$ax_sreg_map</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>]];
<a name="l322"><span class="linenum"> 322</span></a>          } else {
<a name="l323"><span class="linenum"> 323</span></a>              return NULL;
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>  }
<a name="l327"><span class="linenum"> 327</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'openid_extension_filter_request': ['openid_extension_filter_request', 'Filters an OpenID request to find keys specific to an extension, as specified by the Type URI. ', [['www','openid.inc.php',524]], 17],
'assign': ['assign', 'assign a variable ', [['www/lib','xtemplate.class.php',438]], 181],
'ax_consent_form': ['ax_consent_form', '', [['www/extensions/ax','ax.extension.php',153]], 0],
't': ['t', 'Translates a string. ', [['www','locale.inc.php',49]], 183],
'ax_page_profile': ['ax_page_profile', '', [['www/extensions/ax','ax.extension.php',253]], 0],
'ax_signed_fields': ['ax_signed_fields', 'Returns an array of fields that need signing. ', [['www/extensions/ax','ax.extension.php',129]], 0],
'text': ['text', 'returns the parsed text for a block ', [['www/lib','xtemplate.class.php',753]], 8],
'parse': ['parse', 'Parses an XRDS document. ', [['www','discovery.inc.php',462],['www/lib','xtemplate.class.php',511]], 78],
'ax_xrds_types': ['ax_xrds_types', 'Returns the support for AX in SimpleID XRDS document ', [['www/extensions/ax','ax.extension.php',65]], 0],
'openid_extension_alias': ['openid_extension_alias', 'Returns the OpenID alias for an extension, given a Type URI, based on the alias definitions in the current OpenID request. ', [['www','openid.inc.php',583]], 12],
'openid_extension_requested': ['openid_extension_requested', 'Determines whether an extension is present in an OpenID request. ', [['www','openid.inc.php',559]], 13],
'ax_consent': ['ax_consent', '', [['www/extensions/ax','ax.extension.php',212]], 0],
'ax_response': ['ax_response', '', [['www/extensions/ax','ax.extension.php',78]], 0],
'_ax_get_value': ['_ax_get_value', 'Looks up the value of a specified Attribute Exchange Extension type URI. ', [['www/extensions/ax','ax.extension.php',279]], 2],
'strtoupper': ['strtoupper', '', [], 8],
'count': ['count', '', [], 14],
'is_array': ['is_array', '', [], 22],
'define': ['define', '', [], 54],
'array_keys': ['array_keys', '', [], 10],
'substr': ['substr', '', [], 54],
'isset': ['isset', '', [], 239],
'in_array': ['in_array', '', [], 27],
'strpos': ['strpos', '', [], 30],
'unset': ['unset', '', [], 19],
'array_merge': ['array_merge', '', [], 30],
'array': ['array', '', [], 241],
'explode': ['explode', '', [], 30],
'implode': ['implode', '', [], 15],
'htmlspecialchars': ['htmlspecialchars', '', [], 46]};
CLASS_DATA={
'xtemplate': ['xtemplate', 'XTemplate PHP templating engine ', [['www/lib','xtemplate.class.php',6]], 7]};
CONST_DATA={
'OPENID_NS_AX': ['OPENID_NS_AX', '', [['www/extensions/ax','ax.extension.php',34]], 16]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon Apr  6 15:24:46 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
