<!DOCTYPE html>
<html>
<head>
    <title>PHPXRef 0.7.1 : SimpleID : Detail view of hooks.inc</title>
    <link rel="stylesheet" href="../xref.css" type="text/css">
    <link rel="stylesheet" href="../xref-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
</head>
<body>
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of SimpleID</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon Apr  6 15:06:20 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='extensions';
filename='hooks.inc.html';
cookiekey='simpleid';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/extensions/</a> -> <a href="hooks.inc.source.html">hooks.inc</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="hooks.inc.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>This page lists out all the hooks which are available to SimpleID extensions. When implementing these hooks in your extensions, you should replace the word hook with the name of your extension.</b></p>
<table>
<tr><td align="right">File Size: </td><td>284 lines (9 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 14 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#hook_xrds_types">hook_xrds_types</a>()<br>
&nbsp;&nbsp;<a href="#hook_checkid">hook_checkid</a>()<br>
&nbsp;&nbsp;<a href="#hook_checkid_identity">hook_checkid_identity</a>()<br>
&nbsp;&nbsp;<a href="#hook_response">hook_response</a>()<br>
&nbsp;&nbsp;<a href="#hook_signed_fields">hook_signed_fields</a>()<br>
&nbsp;&nbsp;<a href="#hook_indirect_response">hook_indirect_response</a>()<br>
&nbsp;&nbsp;<a href="#hook_user_login_form">hook_user_login_form</a>()<br>
&nbsp;&nbsp;<a href="#hook_rp_form">hook_rp_form</a>()<br>
&nbsp;&nbsp;<a href="#hook_consent_form">hook_consent_form</a>()<br>
&nbsp;&nbsp;<a href="#hook_send">hook_send</a>()<br>
&nbsp;&nbsp;<a href="#hook_consent">hook_consent</a>()<br>
&nbsp;&nbsp;<a href="#hook_routes">hook_routes</a>()<br>
&nbsp;&nbsp;<a href="#hook_page_dashboard">hook_page_dashboard</a>()<br>
&nbsp;&nbsp;<a href="#hook_page_profile">hook_page_profile</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_xrds_types" onClick="logFunction('hook_xrds_types', 'hooks.inc.source.html#l13')" href="hooks.inc.source.html#l13">hook_xrds_types</a>()&nbsp;&nbsp;
<a href="../_functions/hook_xrds_types.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of type URIs to be included in SimpleID's XRDS document.<BR>
</b><BR>For example:<BR>
<BR>
&lt;code&gt;<BR>
&lt;?php<BR>
return array('http://specs.openid.net/extensions/ui/1.0/lang-pref', 'http://specs.openid.net/extensions/ui/1.0/mode/popup');<BR>
?&gt;<BR>
&lt;/code&gt;<BR>
<BR>
<b>return:</b> array an array of URIs<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_checkid" onClick="logFunction('hook_checkid', 'hooks.inc.source.html#l30')" href="hooks.inc.source.html#l30">hook_checkid</a>(<a href="../_variables/request.html">$request</a>, <a href="../_variables/immediate.html">$immediate</a>)&nbsp;&nbsp;
<a href="../_functions/hook_checkid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes an authentication request that is &lt;i&gt;not&lt;/i&gt; about an identifier.<BR>
</b><BR>The OpenID specifications provides a mechanism for extensions to process<BR>
authentication requests that are not about an identifier.&nbsp;&nbsp;Authentication requests<BR>
about identifiers are automatically processed by the {@link simpleid_checkid_identity()}<BR>
function and the {@link hook_checkid_identity()} hooks.<BR>
<BR>
Assertion results are coded within SimpleID as an integer between 127 ({@link CHECKID_OK})<BR>
and -127 ({@link CHECKID_PROTOCOL_ERROR}).&nbsp;&nbsp;Positive values indicate a potential<BR>
positive assertion (subject to various types of user approval), while negative<BR>
values indicate a irrecoverable negative assertion.<BR>
<BR>
This hook should return one of these values.&nbsp;&nbsp;If the extension is unable to<BR>
handle this particular type of authentication request, it should return NULL.<BR>
<BR>
<b>return:</b> int a return value from the list of possible values returned by<br>
<b>param:</b> array $request the OpenID request<br>
<b>param:</b> bool $immediate true if openid.mode is checkid_immediate<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_checkid_identity" onClick="logFunction('hook_checkid_identity', 'hooks.inc.source.html#l56')" href="hooks.inc.source.html#l56">hook_checkid_identity</a>(<a href="../_variables/request.html">$request</a>, <a href="../_variables/identity.html">$identity</a>, <a href="../_variables/immediate.html">$immediate</a>)&nbsp;&nbsp;
<a href="../_functions/hook_checkid_identity.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes an authentication request where the assertion is potentially<BR>
positive.<BR>
</b><BR>Assertion results are coded within SimpleID as an integer between 127 ({@link CHECKID_OK})<BR>
and -127 ({@link CHECKID_PROTOCOL_ERROR}).&nbsp;&nbsp;Positive values indicate a potential<BR>
positive assertion (subject to various types of user approval), while negative<BR>
values indicate a irrecoverable negative assertion.<BR>
<BR>
Extensions are able to examine the authentication request to modify change<BR>
the assertion result from positive to negative.&nbsp;&nbsp;As SimpleID takes the<BR>
minimum from the results returned by this hook, extensions are<BR>
not able to change the assertion result from negative to positive.<BR>
<BR>
If the extension is indifferent to the result of the current authentication<BR>
request (e.g. it cannot understand it), it should return NULL.<BR>
<BR>
This hook is not called at all if SimpleID determines that the assertion<BR>
is negative.<BR>
<BR>
<b>return:</b> int a return value from the list of possible values returned by<br>
<b>param:</b> array $request the OpenID request<br>
<b>param:</b> string $identity the identity to be checked against<br>
<b>param:</b> bool $immediate true if openid.mode is checkid_immediate<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_response" onClick="logFunction('hook_response', 'hooks.inc.source.html#l86')" href="hooks.inc.source.html#l86">hook_response</a>(<a href="../_variables/assertion.html">$assertion</a>, <a href="../_variables/request.html">$request</a>)&nbsp;&nbsp;
<a href="../_functions/hook_response.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets fields and values to be included in the OpenID response.<BR>
</b><BR>For positive assertions, this hook should assume that all user approvals<BR>
have been given and return a response array accordingly.&nbsp;&nbsp;The extension has<BR>
the opportunity to modify the response what the user has actually approved<BR>
in the {@link hook_send() send hook}.<BR>
<BR>
This hook will need to provide any aliases required.<BR>
<BR>
An example:<BR>
<BR>
&lt;code&gt;<BR>
&lt;?php<BR>
$alias = openid_extension_alias($my_uri);<BR>
return array(<BR>
'openid.ns.' . $alias =&gt; $my_uri,<BR>
'openid.' . $alias . '.field' =&gt; 'value'<BR>
);<BR>
?&gt;<BR>
&lt;/code&gt;<BR>
<BR>
<b>return:</b> array the fields and values to include<br>
<b>param:</b> bool $assertion true if a positive assertion is made, false otherwise<br>
<b>param:</b> array $request the OpenID request<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_signed_fields" onClick="logFunction('hook_signed_fields', 'hooks.inc.source.html#l115')" href="hooks.inc.source.html#l115">hook_signed_fields</a>(<a href="../_variables/response.html">$response</a>)&nbsp;&nbsp;
<a href="../_functions/hook_signed_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets fields associated with this extension which needs to be signed<BR>
</b><BR>SimpleID automatically handles signing fields required by the OpenID<BR>
specification, so only the fields introduced by this extension<BR>
needed to be returned by this function.<BR>
<BR>
The array of fields returned by this function must include any applicable<BR>
aliases as required.&nbsp;&nbsp;For example<BR>
<BR>
&lt;code&gt;<BR>
&lt;?php<BR>
$alias = openid_extension_alias($my_uri);<BR>
return array($alias . '.field1', $alias . 'field2');<BR>
?&gt;<BR>
&lt;/code&gt;<BR>
<BR>
<b>return:</b> array an array of fields to sign<br>
<b>param:</b> array $response the OpenID response to sign<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_indirect_response" onClick="logFunction('hook_indirect_response', 'hooks.inc.source.html#l138')" href="hooks.inc.source.html#l138">hook_indirect_response</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/response.html">$response</a>)&nbsp;&nbsp;
<a href="../_functions/hook_indirect_response.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines the format in which assertions are sent, when they are sent via<BR>
indirect communication.<BR>
</b><BR>The OpenID specification version 2.0 provides for the sending of assertions<BR>
via indirect communication.&nbsp;&nbsp;The original specifications provide that the<BR>
response should be formatted within the query string.<BR>
<BR>
Some extensions to the OpenID specification allows the assertion to be<BR>
formatted in some other way, e.g. via the fragment.&nbsp;&nbsp;This hook allows<BR>
extensions to specify which format the assertion should be sent.<BR>
<BR>
If the extension is indifferent regarding the format, it should return<BR>
null<BR>
<BR>
<b>return:</b> int one of OPENID_RESPONSE_QUERY or OPENID_RESPONSE_FRAGMENT or NULL<br>
<b>param:</b> string $url the URL of the RP to which the response is to be sent<br>
<b>param:</b> array $response the assertion to be sent<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_user_login_form" onClick="logFunction('hook_user_login_form', 'hooks.inc.source.html#l160')" href="hooks.inc.source.html#l160">hook_user_login_form</a>(<a href="../_variables/destination.html">$destination</a>, <a href="../_variables/state.html">$state</a>)&nbsp;&nbsp;
<a href="../_functions/hook_user_login_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Provides additional form items when displaying the login form<BR>
</b><BR><b>param:</b> string $destination he SimpleID location to which the user is directed<br>
<b>param:</b> string $state the current SimpleID state, if required by the location<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_rp_form" onClick="logFunction('hook_rp_form', 'hooks.inc.source.html#l172')" href="hooks.inc.source.html#l172">hook_rp_form</a>(<a href="../_variables/request.html">$request</a>, <a href="../_variables/response.html">$response</a>, <a href="../_variables/rp.html">$rp</a>)&nbsp;&nbsp;
<a href="../_functions/hook_rp_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Provides additional form items when displaying the relying party consent<BR>
form<BR>
</b><BR><b>return:</b> string HTML code to be inserted into the verification form<br>
<b>param:</b> array $request the OpenID request<br>
<b>param:</b> array $response the proposed OpenID response<br>
<b>param:</b> array $rp the user's preferences saved with this relying party<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_consent_form" onClick="logFunction('hook_consent_form', 'hooks.inc.source.html#l187')" href="hooks.inc.source.html#l187">hook_consent_form</a>(<a href="../_variables/request.html">$request</a>, <a href="../_variables/response.html">$response</a>, <a href="../_variables/rp.html">$rp</a>)&nbsp;&nbsp;
<a href="../_functions/hook_consent_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Provides additional form items when displaying the relying party consent<BR>
form<BR>
</b><BR><b>return:</b> string HTML code to be inserted into the verification form<br>
<b>param:</b> array $request the OpenID request<br>
<b>param:</b> array $response the proposed OpenID response<br>
<b>param:</b> array $rp the user's preferences saved with this relying party<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_send" onClick="logFunction('hook_send', 'hooks.inc.source.html#l202')" href="hooks.inc.source.html#l202">hook_send</a>(<a href="../_variables/form_request.html">$form_request</a>, &amp;<a href="../_variables/response.html">$response</a>, &amp;<a href="../_variables/rp.html">$rp</a>)&nbsp;&nbsp;
<a href="../_functions/hook_send.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the relying party consent form.<BR>
</b><BR>This provides the extension with the opportunity to:<BR>
<BR>
- modify the OpenID response based on the user's preferences by editing<BR>
$response<BR>
- save the user's preferences by editing $rp<BR>
<BR>
<b>param:</b> array $form_request the data submitted by the user in the relying<br>
<b>param:</b> array &amp;$response pointer to the proposed OpenID response<br>
<b>param:</b> array &amp;$rp pointer to the user's preferences saved with this relying party<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_consent" onClick="logFunction('hook_consent', 'hooks.inc.source.html#l221')" href="hooks.inc.source.html#l221">hook_consent</a>(<a href="../_variables/form_request.html">$form_request</a>, &amp;<a href="../_variables/response.html">$response</a>, &amp;<a href="../_variables/rp.html">$rp</a>)&nbsp;&nbsp;
<a href="../_functions/hook_consent.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Processes the relying party verification form.<BR>
</b><BR>This provides the extension with the opportunity to:<BR>
<BR>
- modify the OpenID response based on the user's preferences by editing<BR>
$response<BR>
- save the user's preferences by editing $rp<BR>
<BR>
<b>param:</b> array $form_request the data submitted by the user in the relying<br>
<b>param:</b> array &amp;$response pointer to the proposed OpenID response<br>
<b>param:</b> array &amp;$rp pointer to the user's preferences saved with this relying party<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_routes" onClick="logFunction('hook_routes', 'hooks.inc.source.html#l240')" href="hooks.inc.source.html#l240">hook_routes</a>()&nbsp;&nbsp;
<a href="../_functions/hook_routes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return any additional items provided by the extension to be appended to the<BR>
Simpleweb route array.<BR>
</b><BR><b>return:</b> array the routes array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_page_dashboard" onClick="logFunction('hook_page_dashboard', 'hooks.inc.source.html#l252')" href="hooks.inc.source.html#l252">hook_page_dashboard</a>()&nbsp;&nbsp;
<a href="../_functions/hook_page_dashboard.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns additional blocks to be displayed in the user's dashboard.<BR>
</b><BR>A block is coded as an array in accordance with the specifications set<BR>
out in {@link page.inc}.<BR>
<BR>
This hook should return an &lt;i&gt;array&lt;/i&gt; of blocks, i.e. an array of<BR>
arrays.<BR>
<BR>
<b>return:</b> array an array of blocks to add to the user's dashboard<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hook_page_profile" onClick="logFunction('hook_page_profile', 'hooks.inc.source.html#l268')" href="hooks.inc.source.html#l268">hook_page_profile</a>()&nbsp;&nbsp;
<a href="../_functions/hook_page_profile.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns additional blocks to be displayed in the user's profile page.<BR>
</b><BR>A block is coded as an array in accordance with the specifications set<BR>
out in {@link page.inc}.<BR>
<BR>
This hook should return an &lt;i&gt;array&lt;/i&gt; of blocks, i.e. an array of<BR>
arrays.<BR>
<BR>
<b>return:</b> array an array of blocks to add to the user's profile page<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon Apr  6 15:06:20 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
